Name: couchbase-cxx-client
Summary: Couchbase C++ SDK
Version: @COUCHBASE_CXX_CLIENT_PACKAGE_VERSION@
Release: @COUCHBASE_CXX_CLIENT_PACKAGE_RELEASE@%{?dist}
Vendor: Couchbase, Inc.
Packager: Couchbase SDK Team <support@couchbase.com>
License: ASL 2.0
URL: https://docs.couchbase.com/cxx-sdk/current/hello-world/overview.html
BuildRequires: gcc, gcc-c++
BuildRequires: cmake >= 3.19
Source0: @COUCHBASE_CXX_CLIENT_TARBALL_NAME@.tar.gz

%description
This is the client and protocol library for Couchbase project.

%package -n %{name}-tools
Summary: Couchbase C++ SDK - Tools
%description -n %{name}-tools
CLI tools from the Couchbase C++ SDK.

%prep
%autosetup -p1 -n@COUCHBASE_CXX_CLIENT_TARBALL_NAME@
%cmake \
    -DBUILD_SHARED_LIBS=OFF \
    -DCOUCHBASE_CXX_CLIENT_BUILD_EXAMPLES=OFF \
    -DCOUCHBASE_CXX_CLIENT_BUILD_TESTS=OFF \
    -DCOUCHBASE_CXX_CLIENT_BUILD_TOOLS=ON \
    -DCOUCHBASE_CXX_CLIENT_STATIC_BORINGSSL=ON

%build
%cmake_build

%install
%cmake_install

%files -n %{name}
%license %{_docdir}/couchbase_cxx_client/LICENSE.txt
%license %{_docdir}/tao/pegtl/LICENSE
%{_libdir}/libcouchbase_cxx_client.a*
%{_libdir}/cmake/couchbase_cxx_client/couchbase_cxx_client*.cmake
%{_libdir}/pkgconfig/couchbase_cxx_client.pc
%{_includedir}/couchbase
%{_includedir}/tao
%{_datadir}/pegtl/cmake/pegtl*.cmake

%files -n %{name}-tools
%{_bindir}/cbc

%changelog
* @COUCHBASE_CXX_CLIENT_RPM_DATE@ Couchbase SDK Team <support@couchbase.com> - @COUCHBASE_CXX_CLIENT_PACKAGE_VERSION@-@COUCHBASE_CXX_CLIENT_PACKAGE_RELEASE@
- Automated build.
